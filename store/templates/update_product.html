{% extends 'base.html' %}
{% block title %}Add Course{% endblock title %}

{% block content %}

<!-- Header-->
<header style="background: url('/static/assets/fondo1.jpg') center/cover no-repeat; min-height: 200px;" class="d-flex justify-content-center align-items-center">
  <div class="text-center text-white">
      <h1 class="display-4 fw-bolder"><i class="bi bi-shop"></i>  Shop in style</h1>
      <p class="lead fw-normal text-white-50 mb-0">With this shop homepage template</p>
  </div>
</header>

<!-- Contenedor principal con fondo blanco -->
<div class="general-container-add-blog" style="background-color: #fff; min-height: 100vh; padding: 50px 0; display: flex; justify-content: center; align-items: center;">

  <!-- Contenedor interno del formulario -->
  <div class="container-add-blog" style="background: #fefefe; padding: 40px; border-radius: 14px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 650px;">
    
    <!-- Título con mezcla de colores -->
    <h2 style="text-align: center; color: #d32f2f; margin-bottom: 30px; font-weight: bold;">
      <i class="fas fa-chalkboard-teacher" style="color: #32d113;"></i> Update your Course
    </h2>

    <!-- Formulario para agregar curso -->
    <form action="" method="POST" enctype="multipart/form-data">
      {{ form.media }}
      {% csrf_token %}
      
      <!-- Input: Nombre -->
      <div class="form-group" style="margin-bottom: 20px;">
        <label for="name" style="color: #333; font-weight: 500;"><i class="fas fa-book-open" style="color: #d32f2f;"></i> Course Name</label>
        <input type="text" name="name" class="input-field"
          style="width: 100%; background: #f5f5f5; padding: 12px; border: 2px solid #ccc; border-radius: 8px; margin-top: 5px;" 
          placeholder="{{form.instance.name}}" required>
        <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.name.errors }}</p>
      </div>

      <!-- Select: Categoría -->
      <div class="form-group" style="margin-bottom: 20px;">
        <label for="category" style="color: #333; font-weight: 500;"><i class="fas fa-tags" style="color: #32d113;"></i> Category</label>
        <select name="category" id="category_id" 
          style="width: 100%; background: #f5f5f5; padding: 12px; border: 2px solid #ccc; border-radius: 8px; margin-top: 5px;">
          {% for category in categories %}
            <option value="{{ category.id }}" {% if form.instance.category.id == category.id %}selected {% endif %}>{{ category.name }}</option>
          {% endfor %}
        </select>
        <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.category.errors }}</p>
      </div>

      <!-- Textarea: Descripción -->
      <div class="form-group" style="margin-bottom: 20px;">
        <label  for="description" style="color: #333; font-weight: 500;"><i class="fas fa-align-left" style="color: #d32f2f;"></i> Description</label>
        <textarea name="description" class="input-field" 
          style="width: 100%; background: #f5f5f5; padding: 12px; border: 2px solid #ccc; border-radius: 8px; margin-top: 5px;" 
          rows="4" placeholder="{{ form.instance.description }}" required ></textarea>
        <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.description.errors }}</p>
      </div>

      <!-- Input: Método de pago -->
      <div class="form-group" style="margin-bottom: 20px;">
        <label for="pay_method" style="color: #333; font-weight: 500;"><i class="fas fa-credit-card" style="color: #32d113;"></i> Payment Method</label>
        <input name="pay_method" class="input-field"
          style="width: 100%; background: #f5f5f5; padding: 12px; border: 2px solid #ccc; border-radius: 8px; margin-top: 5px;" 
          placeholder="{{form.instance.pay_method}}" required>
        <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.pay_method.errors }}</p>
      </div>

      <!-- Input: Precio -->
      <div class="form-group" style="margin-bottom: 20px;">
        <label for="price" style="color: #333; font-weight: 500;"><i class="fas fa-dollar-sign" style="color: #d32f2f;"></i> Price</label>
        <input name="price" class="input-field"
          style="width: 100%; background: #f5f5f5; padding: 12px; border: 2px solid #ccc; border-radius: 8px; margin-top: 5px;" 
          placeholder="{{form.instance.price}}" required>
        <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.price.errors }}</p>
      </div>


      <!-- Checkbox: ¿Está en oferta? -->
<div class="form-group" style="margin-bottom: 20px;">
  <label for="is_sale" style="color: #333; font-weight: 500;">
    <i class="fas fa-tag" style="color: #ffb300;"></i> On Sale
  </label>
  <div style="display: flex; align-items: center; gap: 10px; margin-top: 5px;">
    <!-- Campo oculto para garantizar que se envíe un valor cuando no está chequeado -->
    <input type="hidden" name="is_sale" value="off">

    <!-- Campo checkbox real -->
    <input type="checkbox" name="is_sale" id="is_sale"
      {% if form.instance.is_sale %}checked{% endif %}
      style="width: 20px; height: 20px; cursor: pointer;">

    <label for="is_sale" style="margin: 0; color: #777;">Check if this course is on sale</label>
  </div>
  <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.is_sale.errors }}</p>
</div>




<!-- Input oculto: Precio de oferta -->
<div id="sale_price_container" class="form-group" style="margin-bottom: 20px; display: none;">
  <label for="sale_price" style="color: #333; font-weight: 500;">
    <i class="fas fa-dollar-sign" style="color: #66bb6a;"></i> Sale Price
  </label>
  <input type="number" name="sale_price" id="sale_price" step="0.01" min="0"
    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; margin-top: 5px;"
    placeholder="{{form.instance.sale_price}}">
  <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.sale_price.errors }}</p>
</div>

<!-- Script para mostrar/ocultar input de precio de oferta -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const checkbox = document.getElementById('is_sale');
    const salePriceContainer = document.getElementById('sale_price_container');

    function toggleSalePriceInput() {
      if (checkbox.checked) {
        salePriceContainer.style.display = 'block';
      } else {
        salePriceContainer.style.display = 'none';
        document.getElementById('sale_price').value = ''; // opcional: limpia el campo
      }
    }

    checkbox.addEventListener('change', toggleSalePriceInput);

    // Ejecuta al cargar, en caso esté pre-marcado
    toggleSalePriceInput();
  });
</script>




      <!-- Inputs de imagen y video -->
      <div class="general-form-group" style="display: flex; gap: 20px; margin-bottom: 25px;">
        
        <!-- Imagen -->
<div class="form-group" style="flex: 1;">
  <label for="image" style="color: #333; font-weight: 500;">
    <i class="fas fa-image" style="color: #32d113; font-size: 22px;"></i> Upload Image
  </label>

  <div class="custom-upload-area" style="background: #f5f5f5; border: 2px dashed #d32f2f; border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; position: relative;">
    <i class="fas fa-upload" style="font-size: 30px; color: #d32f2f;"></i>
    <p style="margin-top: 10px; color: #777;">Click or Drag & Drop Image</p>
    
    <!-- Input bien posicionado y pequeño -->
    <input type="file" name="image" class="file-input" 
      style="opacity: 0; width: 100%; height: 100%; top: 0; left: 0; position: absolute; cursor: pointer;">
  </div>

  <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.image.errors }}</p>
</div>

<!-- Video -->
<div class="form-group" style="flex: 1;">
  <label for="video" style="color: #333; font-weight: 500;">
    <i class="fas fa-video" style="color: #d32f2f; font-size: 22px;"></i> Upload Video
  </label>

  <div class="custom-upload-area" style="background: #f5f5f5; border: 2px dashed #ffb300; border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; position: relative;">
    <i class="fas fa-upload" style="font-size: 30px; color: #32d113;"></i>
    <p style="margin-top: 10px; color: #777;">Click or Drag & Drop Video</p>
    
    <!-- Input bien posicionado y pequeño -->
    <input type="file" name="video" class="file-input" 
      style="opacity: 0; width: 100%; height: 100%; top: 0; left: 0; position: absolute; cursor: pointer;">
  </div>

  <p class="error" style="color: #d32f2f; font-size: 14px;">{{ form.video.errors }}</p>
</div>

      </div>

      <!-- Botón enviar -->
      <input type="submit" value="Submit Course" 
        class="submit-btn" 
        style="width: 100%; padding: 14px; background-color: #d32f2f; border: none; border-radius: 10px; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: background-color 0.3s;">
      
    </form>
  </div>
</div>

<!-- Hover del botón -->
<style>
  .submit-btn:hover {
    background-color: #b71c1c;
  }
</style>

<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

{% endblock content %}
