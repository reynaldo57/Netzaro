{% extends 'base.html' %}
{% block title %}Mi Perfil{% endblock title %}
{% block content %}
<!-- Header-->
<header style="background: url('/static/assets/fondo1.jpg') center/cover no-repeat; min-height: 200px;" class="d-flex justify-content-center align-items-center">
    <div class="text-center text-white">
        <h1 class="display-4 fw-bolder"><i class="bi bi-shop"></i>  Shop in style</h1>
        <p class="lead fw-normal text-white-50 mb-0">With this shop homepage template</p>
    </div>
  </header>
<style>
    body {
        background-color: #f1f1f1;
    }

    .profile-section {
        width: 95%;
        margin: auto;
        padding: 2rem 0;
    }

    .profile-container {
        width: 100%;
        padding: 2rem;
        background: #ffffff;
        border-radius: 1rem;
        box-shadow: 0 0 20px rgba(0,0,0,0.05);
    }

    .profile-header {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
        gap: 2rem;
        border-bottom: 2px solid #eee;
        padding-bottom: 2rem;
    }

    .profile-picture-container {
        flex-shrink: 0;
    }

    .profile-picture {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        object-fit: cover;
        border: 5px solid #dc3545;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .profile-about {
        flex: 1;
    }

    .profile-about h5 {
        color: #dc3545;
        margin-bottom: 0.75rem;
    }

    .profile-about p {
        font-size: 1rem;
        color: #212529;
        background-color: #f8f9fa;
        padding: 1rem;
        border-left: 4px solid #dc3545;
        border-radius: 0.5rem;
    }

    .profile-stats {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-top: 1rem;
        list-style: none;
        padding-left: 0;
    }

    .profile-stat, .profile-actions {
        flex: 1;
        background: #fff3f3;
        border: 1px solid #dc3545;
        padding: 0.75rem;
        border-radius: 0.75rem;
        text-align: center;
        color: #dc3545;
        font-weight: 500;
    }

    .action-button {
        display: inline-block;
        margin-top: 0.5rem;
        background-color: #dc3545;
        color: #fff;
        padding: 0.4rem 0.8rem;
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: 500;
    }

    .action-button:hover {
        background-color: #bb2d3b;
    }

    .profile-blogs {
        margin-top: 3rem;
    }

    .profile-blogs h4 {
        color: #dc3545;
        font-weight: 700;
        margin-bottom: 1.5rem;
    }

    .blogs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
    }

    .card {
        transition: transform 0.2s ease-in-out;
    }

    .card:hover {
        transform: scale(1.02);
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }

    .card-img-top {
        height: 180px;
        object-fit: cover;
    }

    .card-footer .btn {
        width: 48%;
    }
</style>

<section class="profile-section">
    <div class="profile-container">

        <!-- Cabecera -->
        <div class="profile-header">
            <div class="profile-picture-container">
                <img src="{{ account.profile.get_profile_picture }}" alt="Foto de perfil" class="profile-picture">
            </div>
            <div class="profile-about">
                <h5><i class="bi bi-person-lines-fill"></i> Sobre mí</h5>
                <p>{{ profile.about_me|default:"Este usuario aún no ha escrito nada." }}</p>

                <ul class="profile-stats">
                    <li class="profile-stat"><i class="bi bi-pencil-fill"></i><br>Posts: <strong>{{ account.user_blogs.count }}</strong></li>
                    <li class="profile-stat"><i class="bi bi-people-fill"></i><br>Seguidores: <strong>{{ account.user_followers.count }}</strong></li>
                    <li class="profile-stat"><i class="bi bi-person-check-fill"></i><br>Siguiendo: <strong>{{ account.user_follows.count }}</strong></li>
                    <li class="profile-actions">
                        {% if following %}
                            <a href="{% url 'follow_or_unfollow_user' account.id %}" class="action-button"><i class="bi bi-person-x-fill"></i> Dejar de seguir</a>
                            {% if muted %}
                                <a href="#" class="action-button"><i class="bi bi-volume-up-fill"></i> Activar sonido</a>
                            {% else %}
                                <a href="#" class="action-button"><i class="bi bi-volume-mute-fill"></i> Silenciar</a>
                            {% endif %}
                        {% else %}
                            <a href="#" class="action-button"><i class="bi bi-person-plus-fill"></i> Seguir</a>
                        {% endif %}
                    </li>
                </ul>
            </div>
        </div>

        <!-- Cursos -->
        <div class="profile-blogs">
            <h4><i class="bi bi-journal-bookmark-fill"></i> Cursos de {{ account.username }}</h4>
            <div class="blogs-grid">
                {% for product in product_user|slice:"8" %}
                <div class="card border-0 shadow-sm">
                    <img src="{{ product.image.url }}" class="card-img-top" alt="Imagen del producto">
                    <div class="card-body p-3">
                        <h6 class="text-danger fw-semibold mb-1"><i class="bi bi-person-circle"></i> {{ product.user.username }}</h6>
                        <h6 class="fw-bold">{{ product.name }}</h6>
                        <p class="text-muted small">{{ product.description|safe|truncatechars:80 }}</p>
                        <p class="fw-bold text-success mb-1"><i class="bi bi-cash-coin"></i> ${{ product.price }}</p>
                        <p class="small text-secondary"><i class="bi bi-credit-card"></i> {{ product.pay_method }}</p>
                    </div>
                    
                </div>
                {% endfor %}
            </div>
        </div>

    </div>
</section>

{% endblock content %}
