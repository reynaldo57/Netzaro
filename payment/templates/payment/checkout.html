{% extends 'base.html' %}
{% block content %}

<style>
  body::-webkit-scrollbar {
    display: none;
}
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Header -->


<header style="background: radial-gradient(circle, #8b0101 0%, #8b0101 100%) center/cover no-repeat; min-height: 200px;" class="d-flex justify-content-center align-items-center">
  <div class="text-center text-white">
      <h1 class="display-5 fw-bold">Finaliza tu Compra</h1>
      <p class="lead fw-normal text-white-50 mb-0">Consigue lo mejor para estas ocaciones</p>
  </div>
</header>

<!-- Main Content -->
<div class="container-fluid my-5">
    <div class="row gx-4">
        
        <!-- Sidebar Izquierdo -->
        <div class="col-lg-3 mb-4">
            <div class="card mb-3 border-info">
                <div class="card-header bg-info text-white">Beneficios</div>
                <div class="card-body">
                    <ul class="list-unstyled mb-0">
                        <li>‚úîÔ∏è Garant√≠a de devoluci√≥n</li>
                        <li>‚úîÔ∏è Env√≠o gratuito desde $50</li>
                        <li>‚úîÔ∏è Productos verificados</li>
                    </ul>
                </div>
            </div>

            <div class="card mb-3 border-success">
                <div class="card-header bg-success text-white">M√©todos de pago</div>
                <div class="card-body">
                    <p>Aceptamos:</p>
                    <ul class="list-unstyled">
                        <li>üí≥ Tarjetas de cr√©dito</li>
                        <li>üí∞ Izipay</li>
                        <li>ü™ô Criptomonedas (pr√≥ximamente)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Contenido Central -->
        <div class="col-lg-6">
            <!-- Order Summary -->
            <div class="card mb-4 shadow">
                <div class="card-header text-white bg-danger">Resumen del pedido</div>
                <div class="card-body">
                              {% for product in cart_products %}
                                <div class="d-flex justify-content-between">
                                <strong>{{ product.name }}</strong>
                            <span>
                                    {% if product.is_sale %}
                                        ${{ product.sale_price}}
                                    {% else %}
                                        ${{product.price}}
                                    {% endif %}
                                </span>
                                 </div>
                        <small>Cantidad: 
                                    {% for key, value in quantities.items %}
                                        {% if key == product.id|slugify %}
                                          {{value}}
                                        {% endif %}
                                    {% endfor %}
                                </small>
                        <hr>
                              {% endfor %}
                              
                              <h5 class="text-end">Total: ${{ totals }}</h5>
                              <div class="text-end">
                              <a href="{% url 'cart_summary' %}" class="btn btn-outline-danger btn-sm">Actualizar carrito</a>
                            </div>
                </div>
            </div>

            <!-- Shipping Form -->
            <div class="card shadow">
                <div class="card-header bg-danger text-white">Informaci√≥n de env√≠o</div>
                <div class="card-body">
                  <form method="POST" action="{% url 'billing_info' %}">
                        {% csrf_token %}
                        {{ shipping_form.as_p}}
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-danger me-2">Pagar con PayPal</button>
                        <button type="submit" name="pago_metodo" value="stripe" class="btn btn-success me-2">Pagar con Stripe</button>
                        <button type="submit" name="pago_metodo" value="izipay" class="btn btn-secondary" id="izipay-btn">Pagar con Izypay</button>
                      </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Sidebar Derecho -->
        <div class="col-lg-3 mb-4">
            <div class="card mb-3 border-warning">
                <div class="card-header bg-warning text-dark">¬øNecesitas ayuda?</div>
                <div class="card-body">
                    <p>üìû Soporte 24/7</p>
                    <p>‚úâÔ∏è soporte@tienda.com</p>
                    <p>üí¨ Chat en vivo</p>
                </div>
            </div>

            <div class="card mb-3 border-primary">
                <div class="card-header bg-primary text-white">Pasos del proceso</div>
                <div class="card-body">
                    <ol class="mb-0">
                        <li>Revisa tu pedido</li>
                        <li>Ingresa datos de env√≠o</li>
                        <li>Selecciona m√©todo de pago</li>
                        <li>Recibe tu orden</li>
                    </ol>
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}